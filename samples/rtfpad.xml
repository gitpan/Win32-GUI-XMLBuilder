<GUI>
	<Icon name='I' file='XMLBuilder.ico'/>
	<Class name='C' icon='$self->{I}'/>
	<Menu name='M'>
		<Item name='File' text='&amp;File'/>
		<Item text='>New'/>
		<Item name='Open' text='>Open...'/>
		<PreExec>
		<![CDATA[
			sub Open_Click {
				my $f = GUI::GetOpenFileName(-title=>'Open...',-directory=>'.',-filter=>["Rich Text (*.rtf)"=>"*.rtf","All files","*.*"]);
				$self->{R}->Load($f) if -f $f;
			}
		]]>
		</PreExec>
		<Item text='>Save'/>
		<Item name='SaveAs' text='>Save As...'/>
		<PreExec>
		<![CDATA[
			sub SaveAs_Click {
				my $f = GUI::GetSaveFileName(-title=>'Save As...',-directory=>'.',-file=>"\0"." "x256,-filter=>["Rich Text (*.rtf)"=>"*.rtf","All files","*.*"]);
				$gui->{R}->Save($f) if -f $f;
			}
		]]>
		</PreExec>
		<Item text='>-'/>
		<Item text='>Page Setup...'/>
		<Item text='>Print...'/>
		<Item text='>-'/>
		<Item name='Exit' text='>Exit'/>
		<Item name='Edit' text='&amp;Edit'/>
		<Item text='>Undo'/>
		<Item text='>-'/>
		<Item text='>Cut'/>
		<Item text='>Copy'/>
		<Item text='>Paste'/>
		<Item text='>Delete'/>
		<Item name='Format' text='&amp;Format'/>
		<Item name='Font' text='>Font...'/>
		<PreExec>
		<![CDATA[
			sub Font_Click {
				my @f = Win32::GUI::ChooseFont();
				if ($#f > 0) {
					my %f = @f;
					delete $f{-size}; # ??
					$gui->{F} = new Win32::GUI::Font(%f);
					$gui->{R}->SetFont($self->{F});
				}
			}
		]]>
		</PreExec>
	</Menu>
	<Window show='1' name='W' left='0' top='0' width='1024' height='768' class='$self->{C}' menu='$self->{M}' title='Untitled - RTFpad'>
		<StatusBar name='S' text='RTFpad 0.1 - Blair Sutton 2003' top='$self->{W}->ScaleHeight-$self->{S}->Height' left='0' width='$self->{W}->ScaleWidth' height='$self->{S}->Height'/>
		<RichEdit name='R'
      left='0' top='0' width='$self->{W}->ScaleWidth' height='$self->{W}->ScaleHeight-$self->{S}->Height'
      style='exec:WS_CHILD|WS_VISIBLE|WS_VSCROLL|ES_LEFT|ES_MULTILINE|ES_AUTOVSCROLL' exstyle='exec:WS_EX_CLIENTEDGE' 
      onLostFocus='R_RClick'
      onDblClick='R_RClick'
    />
		<PreExec>
		<![CDATA[
    	sub R_RClick { # broken because of bug in RichEdit 
				my ($x, $y) = Win32::GUI::GetCursorPos();
				print "Clicked\n";
				$gui->{W}->TrackPopupMenu($gui->{P}->{PopupMenu}, $x, $y-50);
			}
		]]>
		</PreExec>
	</Window>
	<Menu name='P'>
		<Item name='PopupMenu' text='PopupMenuFunctions'/>
		<Item text='>Undo'/>
		<Item text='>-'/>
		<Item text='>Cut'/>
		<Item text='>Copy'/>
		<Item text='>Paste'/>
		<Item text='>Delete'/>
		<Item text='>-'/>
		<Item text='>Select All'/>
	</Menu>

</GUI>

